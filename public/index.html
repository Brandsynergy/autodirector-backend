<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mediad AutoDirector</title>
<style>
  :root { --bg:#0b0f1a; --panel:#0f1629; --text:#e8eefc; --muted:#9fb3d9; --cta:#5ea3ff; --ctaText:#001130; }
  body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; background:var(--bg); color:var(--text); }
  .wrap { max-width:1100px; margin:40px auto; padding:0 16px; }
  h1 { font-size:34px; margin:0 0 6px; }
  .sub { color:var(--muted); margin-bottom:22px; }
  .panel { background:var(--panel); border-radius:14px; padding:18px; margin:18px 0; }
  textarea,input { width:100%; box-sizing:border-box; padding:14px; border-radius:12px; border:none; background:#10162a; color:var(--text); font-size:16px; }
  button { padding:14px 18px; border-radius:12px; border:none; background:var(--cta); color:var(--ctaText); font-weight:700; cursor:pointer; }
  .row { display:grid; grid-template-columns:1fr 1fr; gap:18px; }
  pre { background:#0a1223; padding:14px; border-radius:12px; overflow:auto; }
  .hint { color:var(--muted); font-size:13px; margin-top:8px; }
</style>
</head>
<body>
<div class="wrap">
  <h1>Mediad AutoDirector</h1>
  <div class="sub">Natural-language → plan → execute. Screenshots, link extraction and email sending.</div>

  <div class="panel">
    <label>Describe what to automate</label>
    <textarea id="prompt" rows="3" placeholder="Screenshot https://cnn.com and email it to you@example.com"></textarea>
    <div style="display:flex; gap:10px; margin-top:12px;">
      <button id="btnPlan">Plan</button>
      <button id="btnRun">Run</button>
    </div>
    <div class="hint">Examples: “Screenshot https://cnn.com and email it to you@example.com”. “Get 3 latest links from https://inc.com and email to me@example.com”.</div>
  </div>

  <div class="row">
    <div class="panel">
      <h3>Planned Flow</h3>
      <pre id="planned">—</pre>
    </div>
    <div class="panel">
      <h3>Run Console</h3>
      <pre id="console">—</pre>
    </div>
  </div>

  <div class="panel">
    <h3>Quick tool: Capture a page and email the screenshot</h3>
    <div class="row">
      <div><input id="capUrl" placeholder="https://www.cnn.com" value="https://www.cnn.com" /></div>
      <div><input id="capEmail" placeholder="you@example.com (optional)" /></div>
    </div>
    <div style="margin-top:12px;"><button id="btnCap">Capture & Email</button></div>
    <div class="hint" id="capOut"></div>
  </div>
</div>

<script>
const planned = document.getElementById('planned');
const consoleOut = document.getElementById('console');

async function plan() {
  planned.textContent = 'Planning…';
  const prompt = document.getElementById('prompt').value.trim();
  const r = await fetch('/plan', {
    method:'POST', headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ prompt })
  });
  const j = await r.json();
  planned.textContent = JSON.stringify(j, null, 2);
  return j;
}

async function run(steps) {
  consoleOut.textContent = 'Running…';
  const r = await fetch('/run', {
    method:'POST', headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ steps })
  });
  const j = await r.json();
  consoleOut.textContent = JSON.stringify(j, null, 2);
  return j;
}

document.getElementById('btnPlan').onclick = () => plan();
document.getElementById('btnRun').onclick = async () => {
  const p = await plan();
  if (p.ok && Array.isArray(p.steps)) await run(p.steps);
};

document.getElementById('btnCap').onclick = async () => {
  const url = document.getElementById('capUrl').value.trim();
  const email = document.getElementById('capEmail').value.trim();
  const r = await fetch('/api/capture', {
    method:'POST', headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ url, email: email || undefined })
  });
  const j = await r.json();
  const link = j?.link ? (location.origin + j.link) : '';
  document.getElementById('capOut').textContent = j.ok ? `Done: ${link}` : `Error: ${j.error || 'unknown'}`;
};
</script>
</body>
</html>
                                                                                
  
  
  
  
                                        
  
  
                    
                      
                      
  
                                                            
  
  
  
                                                                                
  
  
  
  
                                                                                                    
  
  
  
  
  
                                                                                                    
  
  
  
  
  
                                                                                
  
  
  
  
                                                                                
  
  
  
  
                                                                                
  
  
  
  
                                                            
  
  
  
