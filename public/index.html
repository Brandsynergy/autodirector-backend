<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Mediad AutoDirector</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body{font-family:Inter,system-ui,Segoe UI,Arial,sans-serif;background:#0f1115;color:#e8e8ea;margin:0}
    header{display:flex;align-items:center;gap:12px;padding:18px 24px;border-bottom:1px solid #20242d}
    header img{height:28px}
    h1{font-size:20px;margin:0}
    .wrap{max-width:1100px;margin:0 auto;padding:24px}
    textarea{width:100%;min-height:110px;border:1px solid #2a2f3a;background:#0c0f14;color:#fff;border-radius:10px;padding:14px;font-size:15px}
    .row{display:flex;gap:12px;margin-top:12px}
    button{background:#e0b15a;border:none;padding:10px 16px;border-radius:10px;color:#111;font-weight:600;cursor:pointer}
    .hint{opacity:.75;margin-top:10px;font-size:13px}
    pre,code{background:#0c0f14;border:1px solid #20242d;border-radius:10px;padding:14px;overflow:auto}
    .cols{display:grid;grid-template-columns:1fr 1fr;gap:18px;margin-top:18px}
  </style>
</head>
<body>
  <header>
    <img src="/logo.png" alt="Mediad logo">
    <h1>Mediad AutoDirector</h1>
  </header>

  <div class="wrap">
    <h3>Describe what to automate</h3>
    <textarea id="prompt" placeholder='Example: "Screenshot https://www.cnn.com and email it to ..."'></textarea>
    <div class="row">
      <button id="run">Run</button>
    </div>
    <div class="hint">Examples use ellipses (“…”) so you can insert any address you like.</div>

    <div class="cols">
      <div>
        <h3>Planned Flow</h3>
        <pre id="planBox">Click “Run”</pre>
      </div>
      <div>
        <h3>Run Console</h3>
        <pre id="logBox"></pre>
      </div>
    </div>
  </div>

<script>
const runBtn = document.getElementById('run');
const logBox = document.getElementById('logBox');
const planBox = document.getElementById('planBox');

runBtn.onclick = async () => {
  log('planning…');
  const text = document.getElementById('prompt').value.trim();

  // Minimal translator: if input starts with "Screenshot <url>"
  // turn it into our /run step format.
  let url = (text.match(/https?:\/\/\S+/i) || [])[0];
  if (!url) {
    log('No URL detected. Try: Screenshot https://example.com …');
    return;
  }
  const payload = { steps: [{ action: 'screenshot_url', url }] };
  planBox.textContent = JSON.stringify(payload, null, 2);

  log('running…');
  const r = await fetch('/run', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(payload)
  });
  const data = await r.json();
  if (!r.ok) { log('ERROR: ' + (data.error || r.statusText)); return; }

  const item = data.results?.find(x => x.action === 'screenshot_url');
  if (item?.url) {
    log('done: ' + item.url);
    // also show the image inline
    const img = new Image();
    img.src = item.url;
    img.style.maxWidth = '100%';
    logBox.appendChild(img);
  } else {
    log('done (no image url found)');
  }
};

function log(msg){ logBox.textContent += msg + '\n'; }
</script>
</body>
</html>
                                                                                                    
  
  
  
  
  
                                                                                
  
  
  
  
                                                                                
  
  
  
  
                                                                                
  
  
  
  
                                                            
  
  
  
