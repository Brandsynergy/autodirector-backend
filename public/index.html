<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Mediad AutoDirector</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --bg:#0b1020; --card:#121830; --muted:#8aa0b6; --text:#e8eef6; --accent:#4ea1ff; }
    * { box-sizing: border-box; }
    body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
           background:linear-gradient(180deg,#0a0f1f,#0e1426); color:var(--text); }
    .wrap { max-width: 860px; margin: 40px auto; padding: 0 16px; }
    .card { background:var(--card); border:1px solid #1f2742; border-radius:16px; padding:24px; box-shadow:0 10px 30px rgba(0,0,0,0.25); }
    header { display:flex; align-items:center; gap:12px; margin-bottom:20px; }
    header img { width:36px; height:36px; object-fit:contain; display:block; }
    h1 { font-size:22px; margin:0; letter-spacing:0.2px; }
    p.sub { margin:6px 0 0 0; color:var(--muted); font-size:14px; }
    label { display:block; font-size:13px; color:#b8c6d6; margin-top:14px; margin-bottom:6px; }
    input { width:100%; padding:12px 14px; border-radius:10px; border:1px solid #243054; background:#0c1327; color:var(--text); }
    input::placeholder { color:#6f83a0; }
    .row { display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
    button { margin-top:16px; width:100%; padding:12px 16px; border:0; border-radius:10px; background:var(--accent);
             color:#00162b; font-weight:700; cursor:pointer; }
    button:disabled { opacity:.6; cursor:not-allowed; }
    .muted { color:var(--muted); font-size:13px; }
    .out { margin-top:18px; background:#0c1327; border:1px dashed #2a355a; border-radius:12px; padding:14px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size:12px; color:#bcd1e9; overflow:auto; max-height:240px; }
    .shot { margin-top:16px; border-radius:12px; border:1px solid #223056; max-width:100%; display:none; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <header>
        <!-- Put /public/logo.png in your repo; this hides the image if itâ€™s missing -->
        <img src="/logo.png" alt="Mediad" onerror="this.style.display='none'">
        <div>
          <h1>Mediad AutoDirector</h1>
          <p class="sub">Capture a web page and email the screenshot.</p>
        </div>
      </header>

      <div class="row">
        <div>
          <label>Website URL</label>
          <input id="url" placeholder="https://www.cnn.com" />
        </div>
        <div>
          <label>Destination email</label>
          <input id="email" placeholder="you@example.com (optional)" />
        </div>
      </div>

      <button id="go">Capture & Email</button>
      <p class="muted">Tip: if you leave the email blank, the server will use <code>GMAIL_USER</code>.</p>

      <div id="out" class="out"></div>
      <img id="shot" class="shot" alt="Screenshot result"/>
    </div>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);
    const out = $("out");
    const btn = $("go");
    const img = $("shot");

    function log(obj) {
      out.textContent = JSON.stringify(obj, null, 2);
    }

    btn.onclick = async () => {
      const url = $("url").value.trim();
      const email = $("email").value.trim();
      img.style.display = "none";
      out.textContent = "";
      if (!url) { log({ ok:false, error:"Please enter a URL." }); return; }

      btn.disabled = true; btn.textContent = "Working...";

      try {
        // Build steps directly
        const steps = [{ action: "screenshot_url", url }];
        if (email) steps.push({ action: "gmail_send_last", to: email });
        else steps.push({ action: "gmail_send_last" });

        const resp = await fetch("/run", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ steps })
        });
        const data = await resp.json();
        log(data);

        const shot = data?.results?.find(r => r.action === "screenshot_url")?.path;
        if (shot) {
          img.src = shot;
          img.style.display = "block";
        }
      } catch (e) {
        log({ ok:false, error: String(e) });
      } finally {
        btn.disabled = false; btn.textContent = "Capture & Email";
      }
    };
  </script>
</body>
</html>
                    
                      
                      
  
                                                            
  
  
  
                                                                                
  
  
  
  
                                                                                                    
  
  
  
  
  
                                                                                                    
  
  
  
  
  
                                                                                
  
  
  
  
                                                                                
  
  
  
  
                                                                                
  
  
  
  
                                                            
  
  
  
